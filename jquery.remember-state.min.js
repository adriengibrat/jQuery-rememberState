;(function(e,t){var n="rememberState",r=t.localStorage;e.fn.prop||(e.fn.prop=e.fn.attr),e.hashCode=function(e){var t=0,n=e.length;if(!n)return t;for(var r=0;r<n;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t};var i=e.expr[":"];e.extend(i,{val:function(e,t,n){return n&&n[3]?(new RegExp(n[3])).test(e.value):!!e.value},answered:function(e){return i.text(e)||e.nodeName.toLowerCase()==="textarea"?i.val(e):i.checked(e)||i.selected(e)}});if(!r||!t.JSON)return e.fn[n]=function(){return this};e.fn[n]=function(i){var s=e.extend({clearOnSubmit:!0,inputSelector:":input",noticeDialog:function(){return e("<p/>",{className:n}).html('Do you want to <a href="#">restore your previously entered info</a>?')}(),storageName:!1},e.type(i)=="string"?{storageName:i}:i),o=this.length>1?!0:!s.storageName,u=this;return s.noticeDialog instanceof e&&s.noticeDialog.find("a").bind("click."+n,function(t){e(this).closest("form").trigger("restore_state"),s.noticeDialog.remove(),t.preventDefault()}),u.each(function(){var i=e(this);if(!i.is("form"))return;o&&(s.storageName=i.attr("id")||e.hashCode([i.attr("action"),u.index(this)].join("|"))),r.getItem(s.storageName)&&s.noticeDialog instanceof e&&(s.noticeDialog.closest("body").length?s.noticeDialog.show():s.noticeDialog.prependTo(i)),i.bind("save_state."+n,function(t,n){if(!n){var o=i.find(s.inputSelector),n=o.serializeArray();o.filter('[type="datetime-local"]').each(function(){var t=e(this);n.push({name:t.attr("name"),value:t.val()})})}n.length&&r.setItem(s.storageName,JSON.stringify(n))}).bind("restore_state."+n,function(){var t=r.getItem(s.storageName);t&&e.each(JSON.parse(t),function(){var e=i.find(':input[name="'+this.name+'"]');e.is(":radio, :checkbox")?e.filter('[value="'+this.value+'"]').prop("checked",!0):e.is("select")?e.find('[value="'+this.value+'"]').prop("selected",!0):e.val(this.value),e.change()})}).bind("reset_state."+n,function(){r.removeItem(s.storageName)}).bind("remove_state."+n,function(){i.trigger("reset_state."+n).add(i.find(":reset")).add(t).unbind("."+n)}).bind("submit."+n,s.clearOnSubmit?function(){e(t).unbind("unload."+n),i.trigger("reset_state."+n)}:null),e(t).bind("unload."+n,function(){i.trigger("save_state."+n)}),i.find(":reset").bind("click."+n,function(){i.trigger("reset_state."+n)})})}})(jQuery,window)