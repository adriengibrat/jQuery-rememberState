(function(e,t){var n="rememberState";if(!t.localStorage||!t.JSON)return e.fn[n]=function(){return this};var r=t.localStorage,i=function(e){var t=r.getItem(e);return t&&JSON.parse(t)},s=function(e,t){t&&r.setItem(e,JSON.stringify(t))},o=function(e){r.removeItem(e)};!1 in e.fn&&(e.fn.prop=e.fn.attr),e.hashCode=function(e){var t=0;if(!e.length)return t;for(var n=e.length,r=0;r<n;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t},e.fn[n]=function(r){var u=e.extend({clearOnSubmit:!0,inputSelector:":input",noticeDialog:function(){return e("<p/>",{className:n}).html('Do you want to <a href="#">restore your previously entered info</a>?')}(),storageName:!1},e.type(r)=="string"?{storageName:r}:r),a=this.length>1?!0:!u.storageName,f=this;return u.noticeDialog instanceof e&&u.noticeDialog.find("a").bind("click."+n,function(t){e(this).closest("form").trigger("restore_state"),u.noticeDialog.remove(),t.preventDefault()}),f.each(function(){var r=e(this);if(!r.is("form"))return;a&&(u.storageName=r.attr("id")||e.hashCode([r.attr("action"),f.index(this)].join("|"))),i(u.storageName)&&u.noticeDialog instanceof e&&(u.noticeDialog.closest("body").length?u.noticeDialog.show():u.noticeDialog.prependTo(r)),r.bind("save_state."+n,function(t,n){if(!n){var i=r.find(u.inputSelector),n=i.serializeArray();i.filter('[type="datetime-local"]').each(function(){var t=e(this);n.push({name:t.attr("name"),value:t.val()})})}n.length&&s(u.storageName,n)}).bind("restore_state."+n,function(){e.each(i(u.storageName),function(){var e=r.find(':input[name="'+this.name+'"]');e.is(":radio, :checkbox")?e.filter('[value="'+this.value+'"]').prop("checked",!0):e.is("select")?e.find('[value="'+this.value+'"]').prop("selected",!0):e.val(this.value),e.change()})}).bind("reset_state."+n,function(){o(u.storageName)}).bind("submit."+n,u.clearOnSubmit?function(){e(t).unbind("unload."+n),r.trigger("reset_state."+n)}:null),e(t).bind("unload."+n,function(){r.trigger("save_state."+n)}),r.find(":reset").bind("click."+n,function(){r.trigger("reset_state."+n)})})}})(jQuery,window)